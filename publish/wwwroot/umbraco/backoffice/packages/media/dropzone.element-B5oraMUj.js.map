{"version":3,"file":"dropzone.element-B5oraMUj.js","sources":["../../../src/packages/media/media/collection/repository/constants.ts","../../../src/packages/media/media/collection/views/constants.ts","../../../src/packages/media/media/collection/constants.ts","../../../src/packages/media/media/entity-actions/move-to/repository/constants.ts","../../../src/packages/media/media/entity-actions/sort-children-of/repository/constants.ts","../../../src/packages/media/media/entity-bulk-actions/move-to/repository/constants.ts","../../../src/packages/media/media/menu/constants.ts","../../../src/packages/media/media/url/repository/constants.ts","../../../src/packages/media/media/recycle-bin/tree/constants.ts","../../../src/packages/media/media/recycle-bin/repository/constants.ts","../../../src/packages/media/media/recycle-bin/entity-action/bulk-trash/repository/constants.ts","../../../src/packages/media/media/recycle-bin/constants.ts","../../../src/packages/media/media/reference/repository/constants.ts","../../../src/packages/media/media/repository/detail/constants.ts","../../../src/packages/media/media/repository/validation/constants.ts","../../../src/packages/media/media/tree/constants.ts","../../../src/packages/media/media/workspace/constants.ts","../../../src/packages/media/media/dropzone/dropzone-media.element.ts","../../../src/packages/media/media/dropzone/dropzone.element.ts"],"sourcesContent":["export const UMB_MEDIA_COLLECTION_REPOSITORY_ALIAS = 'Umb.Repository.MediaCollection';\r\n","export const UMB_MEDIA_GRID_COLLECTION_VIEW_ALIAS = 'Umb.CollectionView.Media.Grid';\r\nexport const UMB_MEDIA_TABLE_COLLECTION_VIEW_ALIAS = 'Umb.CollectionView.Media.Table';\r\n","export const UMB_MEDIA_COLLECTION_ALIAS = 'Umb.Collection.Media';\r\nexport * from './repository/constants.js';\r\nexport * from './views/constants.js';\r\nexport { UMB_MEDIA_COLLECTION_CONTEXT } from './media-collection.context-token.js';\r\n","export const UMB_MOVE_MEDIA_REPOSITORY_ALIAS = 'Umb.Repository.Media.Move';\r\n","export const UMB_SORT_CHILDREN_OF_MEDIA_REPOSITORY_ALIAS = 'Umb.Repository.Media.SortChildrenOf';\r\n","export const UMB_BULK_MOVE_MEDIA_REPOSITORY_ALIAS = 'Umb.Repository.Media.BulkMove';\r\n","export const UMB_MEDIA_MENU_ALIAS = 'Umb.Menu.Media';\r\n","export const UMB_MEDIA_URL_REPOSITORY_ALIAS = 'Umb.Repository.Media.Url';\r\nexport const UMB_MEDIA_URL_STORE_ALIAS = 'Umb.Store.MediaUrl';\r\nexport { UMB_MEDIA_URL_STORE_CONTEXT } from './media-url.store.context-token.js';\r\n","export const UMB_MEDIA_RECYCLE_BIN_TREE_REPOSITORY_ALIAS = 'Umb.Repository.Media.RecycleBin.Tree';\r\nexport const UMB_MEDIA_RECYCLE_BIN_TREE_STORE_ALIAS = 'Umb.Store.Media.RecycleBin.Tree';\r\nexport const UMB_MEDIA_RECYCLE_BIN_TREE_ALIAS = 'Umb.Tree.Media.RecycleBin';\r\n\r\nexport { UMB_MEDIA_RECYCLE_BIN_TREE_STORE_CONTEXT } from './media-recycle-bin-tree.store.context-token.js';\r\n","export const UMB_MEDIA_RECYCLE_BIN_REPOSITORY_ALIAS = 'Umb.Repository.Media.RecycleBin';\r\n","export const UMB_BULK_TRASH_MEDIA_REPOSITORY_ALIAS = 'Umb.Repository.Media.BulkTrash';\r\n","export * from './tree/constants.js';\r\nexport * from './repository/constants.js';\r\nexport * from './entity-action/constants.js';\r\nexport const UMB_MEDIA_RECYCLE_BIN_ROOT_ENTITY_TYPE = 'media-recycle-bin-root';\r\n","export const UMB_MEDIA_REFERENCE_REPOSITORY_ALIAS = 'Umb.Repository.Media.Reference';\r\n","export const UMB_MEDIA_DETAIL_REPOSITORY_ALIAS = 'Umb.Repository.Media.Detail';\r\nexport const UMB_MEDIA_DETAIL_STORE_ALIAS = 'Umb.Store.Media.Detail';\r\nexport { UMB_MEDIA_DETAIL_STORE_CONTEXT } from './media-detail.store.context-token.js';\r\n","export const UMB_MEDIA_VALIDATION_REPOSITORY_ALIAS = 'Umb.Repository.Document.Validation';\r\n","export const UMB_MEDIA_TREE_REPOSITORY_ALIAS = 'Umb.Repository.Media.Tree';\r\nexport const UMB_MEDIA_TREE_STORE_ALIAS = 'Umb.Store.Media.Tree';\r\nexport const UMB_MEDIA_TREE_ALIAS = 'Umb.Tree.Media';\r\nexport { UMB_MEDIA_TREE_STORE_CONTEXT } from './media-tree.store.context-token.js';\r\nexport { UMB_MEDIA_TREE_PICKER_MODAL } from './media-tree-picker-modal.token.js';\r\n","import type { UmbMediaVariantModel } from '../types.js';\r\n\r\nexport * from './media-workspace.context-token.js';\r\n\r\nexport const UMB_MEDIA_WORKSPACE_ALIAS = 'Umb.Workspace.Media';\r\n\r\nexport const UMB_MEMBER_DETAIL_MODEL_VARIANT_SCAFFOLD: UmbMediaVariantModel = {\r\n\tculture: null,\r\n\tsegment: null,\r\n\tname: '',\r\n\tcreateDate: null,\r\n\tupdateDate: null,\r\n} as const;\r\n","import {\r\n\tUmbInputDropzoneElement,\r\n\tUmbFileDropzoneItemStatus,\r\n\tUmbDropzoneSubmittedEvent,\r\n\ttype UmbUploadableItem,\r\n} from '@umbraco-cms/backoffice/dropzone';\r\nimport { css, customElement, property } from '@umbraco-cms/backoffice/external/lit';\r\nimport type { UUIFileDropzoneEvent } from '@umbraco-cms/backoffice/external/uui';\r\n\r\n/**\r\n * A dropzone for uploading files and folders as media items. It is hidden by default and will be shown when dragging files over the window.\r\n * @element umb-dropzone-media\r\n * @fires ProgressEvent When the progress of the upload changes.\r\n * @fires UmbDropzoneSubmittedEvent When the upload is submitted.\r\n * @fires UmbDropzoneChangeEvent When any upload changes.\r\n * @fires CustomEvent<'complete'> When all uploads are complete (deprecated: use {@link UmbDropzoneChangeEvent} instead).\r\n * @slot - The default slot.\r\n */\r\n@customElement('umb-dropzone-media')\r\nexport class UmbDropzoneMediaElement extends UmbInputDropzoneElement {\r\n\t@property({ attribute: 'parent-unique' })\r\n\tparentUnique: string | null = null;\r\n\r\n\t/**\r\n\t * Determines if the dropzone should create temporary files or media items directly.\r\n\t * @deprecated Use the {@link UmbInputDropzoneElement} instead.\r\n\t */\r\n\t@property({ type: Boolean, attribute: 'create-as-temporary' })\r\n\tcreateAsTemporary: boolean = false;\r\n\r\n\t/**\r\n\t * @deprecated Please use `getItems()` instead; this method will be removed in Umbraco 17.\r\n\t * @returns {Array<UmbUploadableItem>} An array of uploadable items.\r\n\t */\r\n\tpublic getFiles = this.getItems;\r\n\r\n\t/**\r\n\t * Gets the current value of the uploaded items.\r\n\t * @returns {Array<UmbUploadableItem>} An array of uploadable items.\r\n\t */\r\n\tpublic getItems(): Array<UmbUploadableItem> {\r\n\t\treturn this._progressItems;\r\n\t}\r\n\r\n\tpublic progressItems = () => this._manager.progressItems;\r\n\tpublic progress = () => this._manager.progress;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tdocument.addEventListener('dragenter', this.#handleDragEnter.bind(this));\r\n\t\tdocument.addEventListener('dragleave', this.#handleDragLeave.bind(this));\r\n\t\tdocument.addEventListener('drop', this.#handleDrop.bind(this));\r\n\r\n\t\tthis.observe(\r\n\t\t\tthis._manager.progressItems,\r\n\t\t\t(progressItems: Array<UmbUploadableItem>) => {\r\n\t\t\t\tconst waiting = progressItems.find((item) => item.status === UmbFileDropzoneItemStatus.WAITING);\r\n\t\t\t\tif (progressItems.length && !waiting) {\r\n\t\t\t\t\tthis.dispatchEvent(new CustomEvent('complete', { detail: progressItems }));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t'_observeProgressItemsComplete',\r\n\t\t);\r\n\t}\r\n\r\n\toverride disconnectedCallback(): void {\r\n\t\tsuper.disconnectedCallback();\r\n\t\tdocument.removeEventListener('dragenter', this.#handleDragEnter.bind(this));\r\n\t\tdocument.removeEventListener('dragleave', this.#handleDragLeave.bind(this));\r\n\t\tdocument.removeEventListener('drop', this.#handleDrop.bind(this));\r\n\t}\r\n\r\n\toverride async onUpload(event: UUIFileDropzoneEvent) {\r\n\t\tif (this.disabled) return;\r\n\t\tif (!event.detail.files.length && !event.detail.folders.length) return;\r\n\r\n\t\tif (this.createAsTemporary) {\r\n\t\t\tconst uploadable = this._manager.createTemporaryFiles(event.detail.files);\r\n\t\t\tthis.dispatchEvent(new UmbDropzoneSubmittedEvent(await uploadable));\r\n\t\t} else {\r\n\t\t\tconst uploadable = this._manager.createMediaItems(event.detail, this.parentUnique);\r\n\t\t\tthis.dispatchEvent(new UmbDropzoneSubmittedEvent(uploadable));\r\n\t\t}\r\n\t}\r\n\r\n\t#handleDragEnter(e: DragEvent) {\r\n\t\tif (this.disabled) return;\r\n\t\t// Avoid collision with UmbSorterController\r\n\t\tconst types = e.dataTransfer?.types;\r\n\t\tif (!types?.length || !types?.includes('Files')) return;\r\n\r\n\t\tthis.toggleAttribute('dragging', true);\r\n\t}\r\n\r\n\t#handleDragLeave() {\r\n\t\tif (this.disabled) return;\r\n\t\tthis.toggleAttribute('dragging', false);\r\n\t}\r\n\r\n\t#handleDrop(event: DragEvent) {\r\n\t\tevent.preventDefault();\r\n\t\tif (this.disabled) return;\r\n\t\tthis.toggleAttribute('dragging', false);\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\t...UmbInputDropzoneElement.styles,\r\n\t\tcss`\r\n\t\t\t:host(:not([disabled])[dragging]) #dropzone {\r\n\t\t\t\topacity: 1;\r\n\t\t\t\tpointer-events: all;\r\n\t\t\t}\r\n\r\n\t\t\t[dropzone] {\r\n\t\t\t\topacity: 0;\r\n\t\t\t}\r\n\r\n\t\t\t#dropzone {\r\n\t\t\t\topacity: 0;\r\n\t\t\t\tpointer-events: none;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tjustify-content: center;\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tz-index: 100;\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tborder: 1px solid var(--uui-color-focus);\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbDropzoneMediaElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-dropzone-media': UmbDropzoneMediaElement;\r\n\t}\r\n}\r\n","import { UmbDropzoneMediaElement } from './dropzone-media.element.js';\r\nimport { UmbDeprecation } from '@umbraco-cms/backoffice/utils';\r\nimport { customElement } from '@umbraco-cms/backoffice/external/lit';\r\n\r\nconst DEPRECATION_MESSAGE = new UmbDeprecation({\r\n\tdeprecated: '<umb-dropzone />',\r\n\tremoveInVersion: '18',\r\n\tsolution: 'Use <umb-dropzone-media /> for media items and <umb-input-dropzone /> for all other files and folders.',\r\n});\r\n\r\n/**\r\n * @inheritdoc\r\n * @deprecated Use {@link UmbDropzoneMediaElement} for media items instead, and {@link UmbInputDropzoneElement} for all other files and folders. This will be removed in Umbraco 18.\r\n */\r\n@customElement('umb-dropzone')\r\nexport default class UmbDropzoneElement extends UmbDropzoneMediaElement {\r\n\toverride connectedCallback(): void {\r\n\t\tsuper.connectedCallback();\r\n\t\tDEPRECATION_MESSAGE.warn();\r\n\t}\r\n}\r\n"],"names":["UMB_MEDIA_COLLECTION_REPOSITORY_ALIAS","UMB_MEDIA_GRID_COLLECTION_VIEW_ALIAS","UMB_MEDIA_TABLE_COLLECTION_VIEW_ALIAS","UMB_MEDIA_COLLECTION_ALIAS","UMB_MOVE_MEDIA_REPOSITORY_ALIAS","UMB_SORT_CHILDREN_OF_MEDIA_REPOSITORY_ALIAS","UMB_BULK_MOVE_MEDIA_REPOSITORY_ALIAS","UMB_MEDIA_MENU_ALIAS","UMB_MEDIA_URL_REPOSITORY_ALIAS","UMB_MEDIA_URL_STORE_ALIAS","UMB_MEDIA_RECYCLE_BIN_TREE_REPOSITORY_ALIAS","UMB_MEDIA_RECYCLE_BIN_TREE_STORE_ALIAS","UMB_MEDIA_RECYCLE_BIN_TREE_ALIAS","UMB_MEDIA_RECYCLE_BIN_REPOSITORY_ALIAS","UMB_BULK_TRASH_MEDIA_REPOSITORY_ALIAS","UMB_MEDIA_RECYCLE_BIN_ROOT_ENTITY_TYPE","UMB_MEDIA_REFERENCE_REPOSITORY_ALIAS","UMB_MEDIA_DETAIL_REPOSITORY_ALIAS","UMB_MEDIA_DETAIL_STORE_ALIAS","UMB_MEDIA_VALIDATION_REPOSITORY_ALIAS","UMB_MEDIA_TREE_REPOSITORY_ALIAS","UMB_MEDIA_TREE_STORE_ALIAS","UMB_MEDIA_TREE_ALIAS","UMB_MEDIA_WORKSPACE_ALIAS","UMB_MEMBER_DETAIL_MODEL_VARIANT_SCAFFOLD","_UmbDropzoneMediaElement_instances","handleDragEnter_fn","handleDragLeave_fn","handleDrop_fn","UmbDropzoneMediaElement","UmbInputDropzoneElement","__privateAdd","__privateMethod","progressItems","waiting","item","UmbFileDropzoneItemStatus","event","uploadable","UmbDropzoneSubmittedEvent","types","css","__decorateClass","property","customElement","DEPRECATION_MESSAGE","UmbDeprecation","UmbDropzoneElement"],"mappings":"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"}