{"version":3,"file":"cascading-menu-popover.element-DfSD_Rcp.js","sources":["../../../src/packages/tiptap/components/cascading-menu-popover/cascading-menu-popover.element.ts"],"sourcesContent":["import { css, customElement, html, ifDefined, property, repeat, when } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbElementMixin } from '@umbraco-cms/backoffice/element-api';\r\nimport { UUIPopoverContainerElement } from '@umbraco-cms/backoffice/external/uui';\r\n\r\nexport type UmbCascadingMenuItem = {\r\n\tlabel: string;\r\n\ticon?: string;\r\n\titems?: Array<UmbCascadingMenuItem>;\r\n\telement?: HTMLElement;\r\n\tseparatorAfter?: boolean;\r\n\tstyle?: string;\r\n\texecute?: () => void;\r\n};\r\n\r\n@customElement('umb-cascading-menu-popover')\r\nexport class UmbCascadingMenuPopoverElement extends UmbElementMixin(UUIPopoverContainerElement) {\r\n\t@property({ type: Array })\r\n\titems?: Array<UmbCascadingMenuItem>;\r\n\r\n\t#getPopoverById(popoverId: string): UUIPopoverContainerElement | null | undefined {\r\n\t\treturn this.shadowRoot?.querySelector(`#${popoverId}`) as UUIPopoverContainerElement;\r\n\t}\r\n\r\n\t#onMouseEnter(item: UmbCascadingMenuItem, popoverId: string) {\r\n\t\tif (!item.items?.length) return;\r\n\r\n\t\tconst popover = this.#getPopoverById(popoverId);\r\n\t\tif (!popover) return;\r\n\r\n\t\t// TODO: This ignorer is just neede for JSON SCHEMA TO WORK, As its not updated with latest TS jet.\r\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n\t\t// @ts-ignore\r\n\t\tpopover.showPopover();\r\n\t}\r\n\r\n\t#onMouseLeave(item: UmbCascadingMenuItem, popoverId: string) {\r\n\t\tconst popover = this.#getPopoverById(popoverId);\r\n\t\tif (!popover) return;\r\n\r\n\t\t// TODO: This ignorer is just neede for JSON SCHEMA TO WORK, As its not updated with latest TS jet.\r\n\t\t// eslint-disable-next-line @typescript-eslint/ban-ts-comment\r\n\t\t// @ts-ignore\r\n\t\tpopover.hidePopover();\r\n\t}\r\n\r\n\t#onClick(item: UmbCascadingMenuItem, popoverId: string) {\r\n\t\titem.execute?.();\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.#onMouseLeave(item, popoverId);\r\n\t\t}, 100);\r\n\t}\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<uui-scroll-container>\r\n\t\t\t\t${when(\r\n\t\t\t\t\tthis.items?.length,\r\n\t\t\t\t\t() => html`${repeat(this.items!, (item, index) => this.#renderItem(item, index))} ${super.render()}`,\r\n\t\t\t\t\t() => super.render(),\r\n\t\t\t\t)}\r\n\t\t\t</uui-scroll-container>\r\n\t\t`;\r\n\t}\r\n\r\n\t#renderItem(item: UmbCascadingMenuItem, index: number) {\r\n\t\tconst popoverId = `item-${index}`;\r\n\r\n\t\tconst element = item.element;\r\n\t\tif (element) {\r\n\t\t\telement.setAttribute('popovertarget', popoverId);\r\n\t\t}\r\n\r\n\t\tconst label = this.localize.string(item.label);\r\n\r\n\t\treturn html`\r\n\t\t\t<div\r\n\t\t\t\t@mouseenter=${() => this.#onMouseEnter(item, popoverId)}\r\n\t\t\t\t@mouseleave=${() => this.#onMouseLeave(item, popoverId)}>\r\n\t\t\t\t${when(\r\n\t\t\t\t\telement,\r\n\t\t\t\t\t() => element,\r\n\t\t\t\t\t() => html`\r\n\t\t\t\t\t\t<uui-menu-item\r\n\t\t\t\t\t\t\tclass=${item.separatorAfter ? 'separator' : ''}\r\n\t\t\t\t\t\t\tlabel=${label}\r\n\t\t\t\t\t\t\tpopovertarget=${popoverId}\r\n\t\t\t\t\t\t\t@click-label=${() => this.#onClick(item, popoverId)}>\r\n\t\t\t\t\t\t\t${when(item.icon, (icon) => html`<uui-icon slot=\"icon\" name=${icon}></uui-icon>`)}\r\n\t\t\t\t\t\t\t<div slot=\"label\" class=\"menu-item\">\r\n\t\t\t\t\t\t\t\t<span style=${ifDefined(item.style)}>${label}</span>\r\n\t\t\t\t\t\t\t\t${when(item.items, () => html`<uui-symbol-expand></uui-symbol-expand>`)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</uui-menu-item>\r\n\t\t\t\t\t`,\r\n\t\t\t\t)}\r\n\t\t\t\t<umb-cascading-menu-popover id=${popoverId} placement=\"right-start\" .items=${item.items}>\r\n\t\t\t\t</umb-cascading-menu-popover>\r\n\t\t\t</div>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override readonly styles = [\r\n\t\t...UUIPopoverContainerElement.styles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\t--uui-menu-item-flat-structure: 1;\r\n\r\n\t\t\t\tbackground-color: var(--uui-color-surface);\r\n\t\t\t\tborder-radius: var(--uui-border-radius);\r\n\t\t\t\tbox-shadow: var(--uui-shadow-depth-3);\r\n\t\t\t\tpadding: var(--uui-size-space-1);\r\n\t\t\t}\r\n\r\n\t\t\t.menu-item {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tgap: var(--uui-size-space-4);\r\n\t\t\t}\r\n\r\n\t\t\t.separator::after {\r\n\t\t\t\tcontent: '';\r\n\t\t\t\tposition: absolute;\r\n\t\t\t\tborder-bottom: 1px solid var(--uui-color-border);\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\tuui-scroll-container {\r\n\t\t\t\tmax-height: 500px;\r\n\t\t\t}\r\n\t\t`,\r\n\t];\r\n}\r\n\r\nexport default UmbCascadingMenuPopoverElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'umb-cascading-menu-popover': UmbCascadingMenuPopoverElement;\r\n\t}\r\n}\r\n"],"names":["_UmbCascadingMenuPopoverElement_instances","getPopoverById_fn","onMouseEnter_fn","onMouseLeave_fn","onClick_fn","renderItem_fn","UmbCascadingMenuPopoverElement","UmbElementMixin","UUIPopoverContainerElement","__privateAdd","html","when","repeat","item","index","__privateMethod","popoverId","popover","element","label","icon","ifDefined","css","__decorateClass","property","customElement"],"mappings":"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"}